{
    "name": "ec-europa/subsite",
    "require": {
        "ec-europa/toolkit": "3.*",
        "ec-europa/dtt-toolkit-upgrade": "dev-master"
    },
    "minimum-stability": "dev",
    "scripts": {
        "post-install-cmd": "@toolkit-upgrade",
        "post-update-cmd": "@toolkit-upgrade",
        "toolkit-upgrade": [
            "mv resources/phpcs-custom.xml phpcs-ruleset.xml",
            "mv resources/composer.json resources/composer.lock tests/",
            "cp -Rf vendor/ec-europa/dtt-toolkit-upgrade/build.project.xml ./",
            "cp -Rf vendor/ec-europa/dtt-toolkit-upgrade/resources ./",
            "mkdir lib/modules/custom && mkdir lib/modules/features",
            "ln -s $(pwd)/lib/modules/*/ lib/modules/custom && rm lib/modules/custom/custom",
            "ln -s $(pwd)/lib/features/*/ lib/modules/features",
            "ln -s $(pwd)/resources/dev_modules lib/modules/custom/dev_modules",
            "PROJECT=$(pwd) composer run-script toolkit-install -d ./vendor/ec-europa/toolkit"
        ]
    }
}

